@model IEnumerable<Visitka.Models.Price>


<link rel="stylesheet" href="~/css/layout/contactform.css" asp-append-version="true" />


<section>
    <div class="container contactform-container">
        <div class="row first-row">
            <div class="form-text-container col-5">
                <p class="ft1">
                    <span class="asterisk">*</span>Оставьте свои контакты<br />
                    и информацию для<br />
                    обратной связи.
                </p>
                <p class="ft2">
                    В ближайшее время с вами<br />
                    свяжутся для уточнения<br />
                    деталей задачи
                </p>
            </div>
            <div class="form-container col-7">
                <form method="post" asp-controller="Request" asp-action="Index">
                    @Html.AntiForgeryToken()
                    <div class="row">
                        <div class="col-md-6 mb-4">
                            <input type="text" class="form-name" id="name" name='ClientName' placeholder="Ваше имя" 
                                value="@(ViewData.ModelState["ClientName"]?.AttemptedValue ?? "")">
                            <div class="invalid-feedback" id="nameError" style="display: none;">
                                Пожалуйста, введите ваше имя
                            </div>
                            @if (ViewData.ModelState["ClientName"]?.Errors.Any() == true)
                            {
                                <div class="invalid-feedback d-block">
                                    @ViewData.ModelState["ClientName"].Errors.First().ErrorMessage
                                </div>
                            }
                        </div>
                        <div class="col-md-6 mb-4">
                            <input type="tel" class="form-phone" id="phone" name="PhoneNumber"
                                placeholder="Телефон" 
                                pattern="[\+]?[7-8]?[0-9\s\-\(\)]{10,15}"
                                title="Введите корректный номер телефона (например: +7 999 123-45-67 или 89991234567)"
                                value="@(ViewData.ModelState["PhoneNumber"]?.AttemptedValue ?? "")">
                            <div class="invalid-feedback" id="phoneError" style="display: none;">
                                Пожалуйста, введите корректный номер телефона
                            </div>
                            @if (ViewData.ModelState["PhoneNumber"]?.Errors.Any() == true)
                            {
                                <div class="invalid-feedback d-block">
                                    @ViewData.ModelState["PhoneNumber"].Errors.First().ErrorMessage
                                </div>
                            }
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-4">
                            <input type="email" class="form-email" id="email" name="Email" placeholder="E-mail"
                                value="@(ViewData.ModelState["Email"]?.AttemptedValue ?? "")">
                            <div class="invalid-feedback" id="emailError" style="display: none;">
                                Пожалуйста, введите корректный email
                            </div>
                            @if (ViewData.ModelState["Email"]?.Errors.Any() == true)
                            {
                                <div class="invalid-feedback d-block">
                                    @ViewData.ModelState["Email"].Errors.First().ErrorMessage
                                </div>
                            }
                        </div>
                        <div class="col-md-6 mb-4">
                            <input type="text" class="form-telegram" id="telegram" name="Telegram" placeholder="Telegram"
                                value="@(ViewData.ModelState["Telegram"]?.AttemptedValue ?? "")">
                        </div>
                    </div>
                    <div class="select-row row">
                        <div class="select mb-5">
                            <div class="selectWrapper">
                                <div class="selectCustom js-selectCustom">
                                    <div class="selectCustom-trigger" id="selectTrigger">
                                        @if (ViewData["SelectedServiceName"] != null && !string.IsNullOrEmpty(ViewData["SelectedServiceName"].ToString()))
                                        {
                                            @ViewData["SelectedServiceName"]
                                        }
                                        else
                                        {
                                            @:Выберите спектр услуг
                                        }
                                    </div>
                                    <div class="selectCustom-options">
                                        @if (Model != null)
                                        {
                                            foreach (var price in Model)
                                            {
                                                <div class="selectCustom-option" data-value="@price.Name">
                                                    @price.Name
                                                </div>
                                            }
                                        }
                                        else
                                        {
                                            <div class="selectCustom-option" data-value="">Нет доступных услуг</div>
                                        }
                                    </div>
                                    <input type="hidden" id="selectedService" class="selectedTrigger" name="NameOfTask" 
                                        value="@(ViewData.ModelState["NameOfTask"]?.AttemptedValue ?? ViewData["SelectedServiceName"] ?? "")">
                                    <div class="invalid-feedback" id="selectError" style="display: none;">
                                        Пожалуйста, выберите спектр услуг
                                    </div>
                                </div>
                                @if (ViewData.ModelState["NameOfTask"]?.Errors.Any() == true)
                                {
                                    <div class="invalid-feedback d-block">
                                        @ViewData.ModelState["NameOfTask"].Errors.First().ErrorMessage
                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="mb-4">
                            <input type="text" class="contactform-text" id="text" name="Comment" 
                                placeholder="Опишите ваш бизнес в двух словах" 
                                value="@(ViewData.ModelState["Comment"]?.AttemptedValue ?? ViewData["InitialQuestion"])">
                            <div class="invalid-feedback" id="commentError" style="display: none;">
                                Пожалуйста, опишите ваш бизнес
                            </div>
                            @if (ViewData.ModelState["Comment"]?.Errors.Any() == true)
                            {
                                <div class="invalid-feedback d-block">
                                    @ViewData.ModelState["Comment"].Errors.First().ErrorMessage
                                </div>
                            }
                        </div>
                    </div>
                    <div class="row">
                        <div class="mb-4 checkbox-btn">
                            <div class="d-flex align-items-start flex-column">
                                <div class="checkbox-btn-title d-flex flex-row">
                                    <input type="checkbox" class="contactform-checkbox" id="checkbox" name="AgreeToPrivacy" value="true"
                                        @(ViewData.ModelState["AgreeToPrivacy"]?.AttemptedValue == "true" ? "checked" : "")>
                                    <label class="form-checkbox-label align-self-center" for="checkbox">
                                        Согласен с условиями <a class="privacy-checkbox-link" asp-area="" asp-controller="Home" asp-action="Privacy">политики конфиденциальности</a>
                                    </label>
                                </div>
                                <div class="invalid-feedback" id="checkboxError" style="display: none;">
                                    Необходимо согласие с политикой конфиденциальности
                                </div>
                            </div>
                            @if (ViewData.ModelState["AgreeToPrivacy"]?.Errors.Any() == true)
                            {
                                <div class="invalid-feedback d-block">
                                    @ViewData.ModelState["AgreeToPrivacy"].Errors.First().ErrorMessage
                                </div>
                            }
                        </div>
                    </div>
                    <div class="row">
                        <button type="submit" class="submit-btn full-width-btn">Отправить</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>


<script src="~/js/contactform.js"></script>
