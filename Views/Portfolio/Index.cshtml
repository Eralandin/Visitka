@model IEnumerable<PortfolioViewModel>

@{
    ViewData["Title"] = "Портфолио";
}

@section Styles {
    <link rel="stylesheet" href="~/css/portfolio/style.css" asp-append-version="true">
}

<partial name="_Backbtn" />

<section class="slogan-section-portfolio">
    <div class="container d-flex justify-content-center">
        <div class="slogan-portfolio">
            <p class="text-start">
                <span class="slogan-text"><span class="asterisk">*</span>Продвигаемся <span class="slogan-forward">вперед</span> с каждым проектом</span>
            </p>
        </div>
    </div>
</section>

<section class="portfolio-images-container container-fluid px-5">
    <div class="row g-4" style="height: 100%">
        @{
            var portfolios = Model.Take(4).ToList();
        }
        <!-- Отладочная информация -->
        <div style="display: none;">
            @foreach (var p in portfolios)
            {
                <div>ID: @p.Id - Name: @p.Name</div>
            }
        </div>
        <div class="col left-side d-flex flex-column">
            @for (int i = 0; i < 2 && i < portfolios.Count; i++)
            {
                var portfolio = portfolios[i];
                <div class="portfolio-card flex-fill" style="height: @(i == 0 ? "40%" : "60%")">
                    <a class="project-link d-flex flex-column h-100 w-100" asp-area="" asp-controller="Portfolio" asp-action="Details" asp-route-id="@portfolio.Id">
                        <div class="portfolio-image-part flex-fill position-relative">
                            @if (portfolio.HasPreviewImage)
                            {
                                <img class="portfolio-image w-100 h-100" 
                                    src="@Url.Action("GetPreviewImage", "Portfolio", new { id = portfolio.Id })" 
                                    alt="@portfolio.Name"
                                    style="object-fit: cover;">
                            }
                            <div class="new-badge">Новинка!</div>
                            <img class="portfolio-arrow" src="~/portfoliopage/Arrow.png" alt="Arrow">
                        </div>
                        <div class="project-title-part flex-shrink-0">
                            <p class="project-title">@portfolio.Name</p>
                            <div class="project-directions">
                                <div class="direction-item">направление</div>
                                <div class="direction-item">направление</div>
                            </div>
                        </div>
                    </a>
                </div>
            }
        </div>

        <div class="col right-side d-flex flex-column">
            @for (int i = 2; i < 4 && i < portfolios.Count; i++)
            {
                var portfolio = portfolios[i];
                <div class="portfolio-card flex-fill" style="height: @(i == 2 ? "60%" : "40%")">
                    <a class="project-link d-flex flex-column h-100 w-100" asp-area="" asp-controller="Portfolio" asp-action="Details" asp-route-id="@portfolio.Id">
                        <div class="portfolio-image-part flex-fill position-relative">
                            @if (portfolio.HasPreviewImage)
                            {
                                <img class="portfolio-image w-100 h-100" 
                                    src="@Url.Action("GetPreviewImage", "Portfolio", new { id = portfolio.Id })" 
                                    alt="@portfolio.Name"
                                    style="object-fit: cover;">
                            }
                            <div class="new-badge">Новинка!</div>
                            <img class="portfolio-arrow" src="~/portfoliopage/Arrow.png" alt="Arrow">
                        </div>
                        <div class="project-title-part flex-shrink-0">
                            <p class="project-title">@portfolio.Name</p>
                            <div class="project-directions">
                                <div class="direction-item">направление</div>
                                <div class="direction-item">направление</div>
                            </div>
                        </div>
                    </a>
                </div>
            }
        </div>
    </div>
</section>